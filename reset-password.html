<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>RÃ©initialiser mot de passe â€” Parfect.golfr</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body style="
  background:#000;
  color:#fff;
  font-family:system-ui;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
">

  <div style="
    background:#111;
    padding:24px;
    border-radius:16px;
    width:320px;
    text-align:center;
  ">
    <h3 style="color:#00ff99;margin-top:0;">
      ğŸ” Nouveau mot de passe
    </h3>

    <input
      id="new-password"
      type="password"
      placeholder="Nouveau mot de passe"
      style="
        width:100%;
        padding:10px;
        border-radius:8px;
        border:none;
        margin-bottom:14px;
        background:#000;
        color:#fff;
      "
    />

    <button id="reset-btn"
      style="
        width:100%;
        padding:10px;
        border-radius:8px;
        background:#00ff99;
        border:none;
        font-weight:bold;
      ">
      Mettre Ã  jour
    </button>

    <p id="msg" style="font-size:.8rem;color:#888;margin-top:10px;"></p>
  </div>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const supabase = window.supabase.createClient(
      "https://jsisebmdjihfmelyymon.supabase.co",
      "TON_PUBLISHABLE_ANON_KEY"
    );

    document.getElementById("reset-btn").onclick = async () => {
      const password = document.getElementById("new-password").value;

      if (!password || password.length < 6) {
        document.getElementById("msg").innerText =
          "Mot de passe trop court";
        return;
      }

      const { error } = await supabase.auth.updateUser({ password });

      if (error) {
        document.getElementById("msg").innerText = error.message;
      } else {
        document.getElementById("msg").innerText =
          "âœ… Mot de passe mis Ã  jour";

        setTimeout(() => {
          window.location.href = "/";
        }, 1200);
      }
    };
  </script>

</body>
</html>
